<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="logo.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jean Cabrera</title>
  <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Spectral:wght@400;600&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
      overflow: hidden;
      font-family: 'Spectral', serif;
      background: #f5f5f7;
      color: #1d1d1f;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .grid {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: grid;
      user-select: none;
      pointer-events: none;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      grid-template-rows: repeat(auto-fill, minmax(100px, 1fr));
    }

    .tile {
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      transition: background-color 0.8s ease, transform 0.8s ease, opacity 0.8s ease;
      aspect-ratio: 1 / 1;
      width: 100%;
      height: auto;
      will-change: background-color, transform;
      transform: scale(0.96);
      z-index: 1;
      opacity: 0.6;
    }

    /* Styles for the PC name element */
    .pc-name {
      font-size: 4rem;
      color: #000;
      letter-spacing: 0.2rem;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
      opacity: 0;
      transition: opacity 1.2s ease-in;
      text-align: center;
      white-space: nowrap;
      user-select: none;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      font-feature-settings: 'liga';
      margin-bottom: 0;
      font-family: 'Spectral', serif;
      display: block;
      /* Show by default for desktop */
    }

    /* Styles for the phone name (logo) element */
    .phone-name {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
      opacity: 0;
      /* Initial hidden state */
      transition: opacity 1.2s ease-in;
      text-align: center;
      user-select: none;
      display: none;
      /* Hide by default for desktop */
    }

    /* Make phone-name visible when show class is added */
    .phone-name.show {
      opacity: 1;
    }

    /* Style for the image inside phone-name */
    .phone-name img {
      max-width: 100%;
      height: auto;
      width: 320px;
      /* Example size for the logo */
      height: 320px;
      /* Example size for the logo */
      object-fit: contain;
      /* Ensures the image fits without distortion */
      display: block;
      /* Ensures proper block behavior for centering */
      margin: 0 auto;
      /* Center the image within its container */
    }


    .pc-name.show {
      opacity: 1;
    }

    .pc-name:not(.show) {
      transition: opacity 0s;
    }

    /* Portfolio styles */
    .portfolio {
      width: 100%;
      color: #333;
      opacity: 0;
      text-align: left;
      z-index: 2;
      user-select: none;
      font-family: 'Inter', sans-serif;
      transition: opacity 1.2s ease-in;
      box-sizing: border-box;
    }

    .portfolio.show {
      opacity: 1;
    }

    .portfolio h2 {
      font-weight: 600;
      margin-bottom: 1rem;
      font-size: 2rem;
      color: #000;
    }

    .project {
      margin-bottom: 1.2rem;
    }

    .project-title {
      font-weight: 600;
      font-size: 1.25rem;
      color: #1d1d1f;
      margin-bottom: 0.2rem;
    }

    .project-desc {
      font-weight: 400;
      font-size: 1rem;
      color: #555;
      line-height: 1.4;
    }

    .zcool-kuaile {
      font-family: 'ZCOOL KuaiLe', cursive;
    }

    /* Styles from the new portfolio HTML */
    body.portfolio-active {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 2rem;
      color: #1a1a1a;
      overflow: auto;
      /* Allow scrolling for portfolio content */
    }

    .window-card {
      background-color: #ffffff;
      border-radius: 1rem;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      padding: 1.5rem;
      max-width: 90%;
      width: 800px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      position: relative;
    }

    .nav-toggle-button {
      padding: 0.5rem 1rem;
      border-radius: 9999px;
      font-weight: 500;
      transition: all 0.2s ease-in-out;
      cursor: pointer;
      outline: none;
    }

    .nav-toggle-active {
      background-color: #e0e0e0;
      color: #333333;
    }

    .nav-toggle-inactive {
      color: #666666;
      background-color: transparent;
    }

    .headline-gradient {
      background: linear-gradient(to bottom right, #000000, #bbbbbb);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: transparent;
      font-weight: 700;
      display: inline;
      /* Changed from inline-block */
      line-height: 1.4;
    }

    .cursor {
      display: inline-block;
      margin-left: 0.1rem;
      width: 2px;
      background-color: #333;
      animation: blink 0.7s infinite;
      height: 1em;
      /* cursor height will be relative to the font size of the parent */
      vertical-align: baseline;
      /* ensures it aligns with the text baseline */
      /* Removed position: relative and top: 0.15em as they caused misalignment */
    }

    .main-headline {
      /* Removed min-height: 120px; */
      text-align: center;
      /* Keeps the text centered */
      margin-bottom: 1.5rem;
      padding-top: 1rem;
    }

    /* Media query for mobile devices */
    @media (max-width: 425px) and (min-width: 375px) {
      .pc-name {
        display: none;
        /* Hide PC name on mobile */
      }

      .phone-name {
        display: block;
        /* Show phone name on mobile */
      }

      #pc-link {
        display: none;
      }

      #pc-nav {
        display: none;
      }

      .portfolio {
        padding: 1rem;
      }

      .main-headline {
        min-height: 120px;
        text-align: center;
        /* Keeps the text centered */
        margin-bottom: 1.5rem;
        padding-top: 1rem;
      }

      .smart-text {
        font-size: 0.75rem;
      }
    }

    @media(max-width:375px)and (min-width: 320px) {
      .pc-name {
        display: none;
        /* Hide PC name on mobile */
      }

      .phone-name {
        display: block;
        /* Show phone name on mobile */
      }

      #pc-link {
        display: none;
      }

      #pc-nav {
        display: none;
      }

      .portfolio {
        padding: 1rem;
      }

      .window-card {
        max-width: 100%;
      }

      .main-headline {
        min-height: 120px;
      }
    }

    @media (max-width:320px) {
      .pc-name {
        display: none;
        /* Hide PC name on mobile */
      }

      .phone-name {
        display: block;
        /* Show phone name on mobile */
      }

      #pc-link {
        display: none;
      }

      #pc-nav {
        display: none;
      }

      .portfolio {
        padding: 0rem;
        margin: 0rem;
      }

      .window-card {
        max-width: 120%;
      }

      .main-headline {
        min-height: 120px;
      }

      .smart-text {
        font-size: 0.70rem
      }
    }
  </style>
</head>

<body>
  <div class="grid" id="grid"></div>
  <div class="phone-name" id="phone-name">
    <img src="logo.png" alt="Logo" class="logo-image" />
  </div>
  <div class="pc-name" id="pc-name">
    Jean Cabrera
    <span class="zcool-kuaile">
      [<strong>陈</strong>嘉<strong>诚</strong>]
    </span>
  </div>
  <div class="portfolio" id="portfolio" aria-live="polite">
    <div class="w-full max-w-7xl mx-auto flex flex-col items-center">
      <header class="w-full flex items-center justify-between py-6 px-4 md:px-0">
        <div class="flex items-center space-x-2">
          <span class="text-gray-800 text-lg font-semibold">Jean Cabrera</span>
          <span
            class="text-gray-400 text-lg hidden md:inline zcool-kuaile  "><strong>陈</strong>嘉<strong>诚</strong></span>
        </div>
        <div class="flex bg-gray-200 rounded-full p-1 nav-toggle-group" role="tablist" aria-label="Main Navigation"
          id="pc-nav">
          <button id="work-tab" class="nav-toggle-button nav-toggle-active" role="tab" aria-selected="true"
            aria-controls="work-content">Experience</button>
          <button id="info-tab" class="nav-toggle-button nav-toggle-inactive" role="tab" aria-selected="false"
            aria-controls="info-content">About</button>
        </div>
        <div class="flex items-center space-x-6 text-gray-600 font-medium header-links phone-links" id="pc-link">
          <a href="https://www.linkedin.com/in/yourprofile" target="_blank" rel="noopener noreferrer"
            class="hover:text-gray-800 transition duration-200">LinkedIn</a>
          <a href="/path/to/your/resume.pdf" target="_blank" rel="noopener noreferrer"
            class="hover:text-gray-800 transition duration-200">Resume</a>
        </div>
      </header>
      <section class="window-card mt-8 w-full">
        <div id="work-content" class="main-content-area md:text-left">
          <p class="text-gray-600 text-sm md:text-lg font-medium mb-4">
            I don't just solve problems, I unlock opportunities.
          </p>
          <h1 class="text-gray-900 text-3xl md:text-4xl lg:text-6xl font-bold main-headline">
            <span id="typewriter-text" class="headline-gradient" aria-live="polite"></span><span class="cursor"></span>
          </h1>
          <p class="text-gray-600 smart-text md:text-md lg:text-lg sub-text mb-2 text-right mt-6">
            <b>Smart moves need the right partner.</b>
          </p>
          <p class="text-gray-400 text-xs md:text-md lg:text-lg sub-text text-right">
            Let’s work together!
          </p>
        </div>

        <div id="info-content" class="hidden main-content-area md:text-left">
          <h2 class="text-gray-900 text-2xl md:text-3xl font-bold mb-4">About Me</h2>
          <p class="text-gray-700 text-base md:text-lg mb-4">
            Hello! I'm Jean Cabrera
          </p>
          <p class="text-gray-700 text-base md:text-lg mb-4">

          </p>
          <p class="text-gray-700 text-base md:text-lg">

          </p>
        </div>
      </section>
    </div>
  </div>


  <script>
    const grid = document.getElementById('grid');
    let name;
    // Determine which element to control based on screen width
    if (window.innerWidth <= 425) {
      name = document.getElementById('phone-name');
    } else {
      name = document.getElementById('pc-name');
    }
    let tileSize = 100;
    let tiles = [];
    let totalTiles = 0;
    let isFast;

    /**
     * Creates the background grid tiles and sets up their initial styles.
     * Adjusts tile size based on screen dimensions for optimal performance.
     */
    function createTiles() {
      tiles = [];
      grid.innerHTML = ''; // Clear existing tiles

      const containerWidth = window.innerWidth;
      const containerHeight = window.innerHeight;
      let cols = Math.ceil(containerWidth / tileSize);
      let rows = Math.ceil(containerHeight / tileSize);

      // Increase tileSize if too many tiles are generated for performance
      while (cols > 32 || rows > 16) {
        isFast = true;
        tileSize += 10;
        cols = Math.ceil(containerWidth / tileSize);
        rows = Math.ceil(containerHeight / tileSize);
      }
      totalTiles = rows * cols;
      grid.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
      grid.style.gridTemplateRows = `repeat(${rows}, 1fr)`;

      for (let i = 0; i < rows * cols; i++) {
        const tile = document.createElement('div');
        tile.classList.add('tile');
        const shade = 245 + Math.floor(Math.random() * 10);
        tile.style.backgroundColor = `rgb(${shade},${shade},${shade})`;
        tile.style.transform = 'scale(1)';
        grid.appendChild(tile);
        tiles.push(tile);
      }
    }

    /**
     * Creates a delay using Promises.
     * @param {number} ms - The delay time in milliseconds.
     * @returns {Promise<void>} A Promise that resolves after the specified delay.
     */
    function delay(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    /**
     * Shuffles an array using the Fisher-Yates algorithm.
     * @param {Array} array - The array to shuffle.
     * @returns {Array} A new shuffled array.
     */
    function shuffle(array) {
      let arr = [...array];
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    /**
     * Generator function to yield Fibonacci numbers.
     * Used to determine group sizes for tile animations.
     */
    function* fibonacci() {
      let a = 1,
        b = 1;
      while (true) {
        yield a;
        [a, b] = [b, a + b];
      }
    }

    /**
     * Animates tiles to a specific color and scale in random Fibonacci-sized groups.
     * @param {string} color - The target background color for the tiles.
     * @param {number} scale - The target scale for the tiles.
     */
    async function animateTilesToColorRandomGroups(color, scale) {
      let shuffledTiles = shuffle(tiles);
      let index = 0;
      const fibGen = fibonacci();

      while (index < shuffledTiles.length) {
        const groupSize = fibGen.next().value;
        const actualGroupSize = Math.min(groupSize, shuffledTiles.length - index);
        const group = shuffledTiles.slice(index, index + actualGroupSize);

        for (const tile of group) {
          tile.style.backgroundColor = color;
          tile.style.transform = `scale(${scale})`;
          tile.style.zIndex = '1';
          tile.style.opacity = '0.6';
          if (isFast) {
            await delay(1); // Shorter delay for faster animation on smaller screens/more tiles
          } else {
            await delay(4);
          }
        }
        index += actualGroupSize;
        if (isFast) {
          await delay(4);
        } else {
          await delay(12);
        }
      }
    }

    /**
     * Animates tiles back to random shades of white, in random Fibonacci-sized groups.
     */
    async function animateTilesToRandomWhite() {
      let shuffledTiles = shuffle(tiles);
      let index = 0;
      const fibGen = fibonacci();

      while (index < shuffledTiles.length) {
        const groupSize = fibGen.next().value;
        const actualGroupSize = Math.min(groupSize, shuffledTiles.length - index);
        const group = shuffledTiles.slice(index, index + actualGroupSize);

        for (const tile of group) {
          const shade = 245 + Math.floor(Math.random() * 10);
          tile.style.backgroundColor = `rgb(${shade},${shade},${shade})`;
          tile.style.transform = 'scale(1)';
          tile.style.zIndex = '3';
          tile.style.opacity = '1';
          if (!isFast) {
            await delay(4);
          }
        }

        index += actualGroupSize;
        if (!isFast) {
          await delay(8);
        }
      }
    }

    const typewriterTextElement = document.getElementById('typewriter-text');
    const phrases = [
      "Intuitive user experiences.",
      "Actionable data insights.",
      "Secure system architecture.",
      "Smart financial solutions."
    ];

    let phraseIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let typingSpeed = 70;
    let deletingSpeed = 40;
    let pauseBeforeDelete = 1500;
    let pauseBeforeType = 500;
    let typewriterTimeoutId;

    /**
     * Implements a typewriter effect for the headline text.
     * Types out phrases, then deletes them, and cycles through an array of phrases.
     */
    function typeWriter() {
      const currentPhrase = phrases[phraseIndex];

      clearTimeout(typewriterTimeoutId); // Clear any existing timeout to prevent multiple calls

      if (isDeleting) {
        // Deleting characters
        typewriterTextElement.textContent = currentPhrase.substring(0, charIndex - 1);
        charIndex--;

        if (charIndex === 0) {
          // Finished deleting, switch to typing next phrase
          isDeleting = false;
          phraseIndex = (phraseIndex + 1) % phrases.length;
          typewriterTimeoutId = setTimeout(typeWriter, pauseBeforeType);
          return;
        }

        typewriterTimeoutId = setTimeout(typeWriter, deletingSpeed);
      } else {
        // Typing characters
        typewriterTextElement.textContent = currentPhrase.substring(0, charIndex + 1);
        charIndex++;

        if (charIndex === currentPhrase.length) {
          // Finished typing, pause before deleting
          isDeleting = true;
          typewriterTimeoutId = setTimeout(typeWriter, pauseBeforeDelete);
          return;
        }

        typewriterTimeoutId = setTimeout(typeWriter, typingSpeed);
      }
    }

    let workTab;
    let infoTab;
    let workContent;
    let infoContent;

    /**
     * Handles switching between the "Experience" and "About" tabs in the portfolio section.
     * @param {string} activeSectionId - The ID of the content section to show ('work-content' or 'info-content').
     */
    function switchTab(activeSectionId) {
      if (activeSectionId === 'work-content') {
        workContent.classList.remove('hidden');
        infoContent.classList.add('hidden');

        workTab.classList.add('nav-toggle-active');
        workTab.classList.remove('nav-toggle-inactive');
        workTab.setAttribute('aria-selected', 'true');

        infoTab.classList.add('nav-toggle-inactive');
        infoTab.classList.remove('nav-toggle-active');
        infoTab.setAttribute('aria-selected', 'false');

        // Restart typewriter effect for "Experience" tab
        clearTimeout(typewriterTimeoutId);
        typewriterTextElement.textContent = phrases[0].substring(0, 1);
        phraseIndex = 0;
        charIndex = 1;
        isDeleting = false;
        typewriterTimeoutId = setTimeout(typeWriter, typingSpeed);
      } else if (activeSectionId === 'info-content') {
        infoContent.classList.remove('hidden');
        workContent.classList.add('hidden');

        infoTab.classList.add('nav-toggle-active');
        infoTab.classList.remove('nav-toggle-inactive');
        infoTab.setAttribute('aria-selected', 'true');

        workTab.classList.add('nav-toggle-inactive');
        workTab.classList.remove('nav-toggle-active');
        workTab.setAttribute('aria-selected', 'false');

        // Stop typewriter effect for "About" tab
        clearTimeout(typewriterTimeoutId);
        typewriterTextElement.textContent = ""; // Clear text
        charIndex = 0;
        isDeleting = false;
      }
    }

    /**
     * Runs the main animation sequence: grid animation, name reveal, portfolio reveal, and typewriter effect.
     */
    async function runSequence() {
      // Hide portfolio and name initially
      portfolio.classList.remove('show');
      name.classList.remove('show');

      // Animate grid tiles to a specific color
      await animateTilesToColorRandomGroups('#f5f5f7', 0.96);

      // Show the name (Jean Cabrera or logo)
      name.classList.add('show');
      await delay(2000); // Pause for a moment

      // Animate tiles back to white
      await animateTilesToRandomWhite();

      // Hide the name again
      name.classList.remove('show');

      // Get tab elements after initial animations (they are part of the portfolio div)
      workTab = document.getElementById('work-tab');
      infoTab = document.getElementById('info-tab');
      workContent = document.getElementById('work-content');
      infoContent = document.getElementById('info-content');

      // Add event listeners for tab switching
      workTab.addEventListener('click', () => switchTab('work-content'));
      infoTab.addEventListener('click', () => switchTab('info-content'));

      // Show the portfolio section
      portfolio.classList.add('show');
      document.body.classList.add('portfolio-active');
      await delay(20); // Small delay to allow CSS transitions to start

      // Re-animate tiles for the portfolio background
      await animateTilesToColorRandomGroups('#f5f5f7', 0.96);

      // Start the typewriter effect for the "Experience" tab
      typewriterTextElement.textContent = phrases[0].substring(0, 1);
      typewriterTimeoutId = setTimeout(typeWriter, typingSpeed);

      // Ensure the "Experience" tab is active by default
      switchTab('work-content');
    }

    /**
     * Initializes the page after all resources are loaded.
     */
    window.onload = () => {
      createTiles(); // Create the initial grid
      runSequence(); // Start the animation sequence
    };
  </script>
</body>

</html>